!function(s){var p,f,r,l,e,n,o,c,h,d,m,a,v,i=Array.prototype.slice,g=decodeURIComponent,u=s.param,t=s.bbq=s.bbq||{},y=s.event.special,b="hashchange",$="querystring",x="fragment",j="elemUrlAttr",w="href",N="src",A=/^.*\?|#.*$/g,C={};function E(t){return"string"==typeof t}function S(t){var n=i.call(arguments,1);return function(){return t.apply(this,n.concat(i.call(arguments)))}}function q(t,n,e,r,o){var a,i,c,u,e=r!==p?(u=(i=e.match(t?d:/^([^#?]*)\??([^#]*)(#?.*)/))[3]||"",2===o&&E(r)?a=r.replace(t?h:A,""):(c=l(i[2]),r=E(r)?l[t?x:$](r):r,a=2===o?r:1===o?s.extend({},r,c):s.extend({},c,r),a=f(a),t&&(a=a.replace(m,g))),i[1]+(t?v:a||!i[1]?"?":"")+a+u):n(e!==p?e:location.href);return e}function I(t,n,e){return n=n===p||"boolean"==typeof n?(e=n,u[t?x:$]()):E(n)?n.replace(t?h:A,""):n,l(n,e)}function R(r,o,a,i){return E(a)||"object"==typeof a||(i=a,a=o,o=p),this.each(function(){var t=s(this),n=o||c()[(this.nodeName||"").toLowerCase()]||"",e=n&&t.attr(n)||"";t.attr(n,u[r](e,a,i))})}u[$]=S(q,0,function(t){return t.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}),u[x]=r=S(q,1,function(t){return t.replace(d,"$2")}),u.sorted=f=function(t,n){var o=[],a={};return s.each(u(t,n).split("&"),function(t,n){var e=n.replace(/(?:%5B|=).*$/,""),r=a[e];r||(r=a[e]=[],o.push(e)),r.push(n)}),s.map(o.sort(),function(t){return a[t]}).join("&")},r.noEscape=function(t){t=s.map((t=t||"").split(""),encodeURIComponent);m=new RegExp(t.join("|"),"g")},r.noEscape(",/"),r.ajaxCrawlable=function(t){return t!==p&&(v=t?(h=/^.*(?:#!|#)/,d=/^([^#]*)(?:#!|#)?(.*)$/,"#!"):(h=/^.*#/,d=/^([^#]*)#?(.*)$/,"#"),a=!!t),a},r.ajaxCrawlable(0),s.deparam=l=function(t,u){var f={},l={true:!0,false:!1,null:null};return s.each(t.replace(/\+/g," ").split("&"),function(t,n){var e,n=n.split("="),r=g(n[0]),o=f,a=0,i=r.split("]["),c=i.length-1,c=/\[/.test(i[0])&&/\]$/.test(i[c])?(i[c]=i[c].replace(/\]$/,""),(i=i.shift().split("[").concat(i)).length-1):0;if(2===n.length)if(e=g(n[1]),u&&(e=e&&!isNaN(e)?+e:"undefined"===e?p:l[e]!==p?l[e]:e),c)for(;a<=c;a++)o=o[r=""===i[a]?o.length:i[a]]=a<c?o[r]||(i[a+1]&&isNaN(i[a+1])?{}:[]):e;else s.isArray(f[r])?f[r].push(e):f[r]!==p?f[r]=[f[r],e]:f[r]=e;else r&&(f[r]=u?p:"")}),f},l[$]=S(I,0),l[x]=e=S(I,1),s[j]||(s[j]=function(t){return s.extend(C,t)})({a:w,base:w,iframe:N,img:N,input:N,form:"action",link:w,script:N}),c=s[j],s.fn[$]=S(R,$),s.fn[x]=S(R,x),t.pushState=n=function(t,n){E(t)&&/^#/.test(t)&&n===p&&(n=2);var e=t!==p,n=r(location.href,e?t:{},e?n:2);location.href=n},t.getState=o=function(t,n){return t===p||"boolean"==typeof t?e(t):e(n)[t]},t.removeState=function(t){var e={};t!==p&&(e=o(),s.each(s.isArray(t)?t:arguments,function(t,n){delete e[n]})),n(e,2)},y[b]=s.extend(y[b],{add:function(t){var n;function e(t){var e=t[x]=r();t.getState=function(t,n){return t===p||"boolean"==typeof t?l(e,t):l(e,n)[t]},n.apply(this,arguments)}if(s.isFunction(t))return n=t,e;n=t.handler,t.handler=e}})}(jQuery),function(o,e){function r(t){return"#"+(t=t||location.href).replace(/^[^#]*#?(.*)$/,"$1")}var t,a,i,n,c,u,f,l="hashchange",s=document,p=o.event.special,h=s.documentMode,d="on"+l in e&&(void 0===h||7<h);function m(){var t=r(),n=f(c);t!==c?(u(c=t,n),o(e).trigger(l)):n!==c&&(location.href=location.href.replace(/#.*/,"")+n),a=setTimeout(m,o.fn[l].delay)}function v(t){return t}o.fn[l]=function(t){return t?this.bind(l,t):this.trigger(l)},o.fn[l].delay=50,p[l]=o.extend(p[l],{setup:function(){if(d)return!1;o(t.start)},teardown:function(){if(d)return!1;o(t.stop)}}),p={},c=r(),f=u=v,p.start=function(){a||m()},p.stop=function(){a&&clearTimeout(a),a=void 0},"Microsoft Internet Explorer"!==navigator.appName||d||(p.start=function(){i||(n=(n=o.fn[l].src)&&n+r(),i=o('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){n||u(r()),m()}).attr("src",n||"javascript:0").insertAfter("body")[0].contentWindow,s.onpropertychange=function(){try{"title"===event.propertyName&&(i.document.title=s.title)}catch(t){}})},p.stop=v,f=function(){return r(i.location.href)},u=function(t,n){var e=i.document,r=o.fn[l].domain;t!==n&&(e.title=s.title,e.open(),r&&e.write('<script>document.domain="'+r+'"<\/script>'),e.close(),i.location.hash=t)}),t=p}(jQuery,this);