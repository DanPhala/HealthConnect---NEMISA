!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).LazyLoad=e()}(this,function(){"use strict";function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,a=arguments[e];for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}).apply(this,arguments)}function r(t){return e({},z,t)}function o(t,e){var n,a="LazyLoad::Initialized",e=new t(e);try{n=new CustomEvent(a,{detail:{instance:e}})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(a,!1,!1,{instance:e})}window.dispatchEvent(n)}function c(t,e){return t.getAttribute(S+e)}function l(t){return U(t)===P}function s(t){return t.llTempImage}function u(t,e){t&&(t.toLoadCount=e)}function n(t){for(var e,n=[],a=0;e=t.children[a];a+=1)"SOURCE"===e.tagName&&n.push(e);return n}function a(t,e){n(t).forEach(e)}function i(t){return delete t[D]}function d(e,t){var n;rt(e)||(n={},t.forEach(function(t){n[t]=e.getAttribute(t)}),e[D]=n)}function f(a,t){var o;rt(a)&&(o=lt(a),t.forEach(function(t){var e,n;e=a,(t=o[n=t])?e.setAttribute(n,t):e.removeAttribute(n)}))}function _(t,e,n){X(t,e.class_applied),$(t,B),n&&(e.unobserve_completed&&Z(t,e),W(e.callback_applied,t,n))}function g(t,e,n){X(t,e.class_loading),$(t,V),n&&(tt(n,1),W(e.callback_loading,t,n))}function b(t,e,n){n&&t.setAttribute(e,n)}function v(t,e){b(t,G,c(t,e.data_sizes)),b(t,R,c(t,e.data_srcset)),b(t,T,c(t,e.data_src))}function m(t,e){!e||0<e.loadingCount||0<e.toLoadCount||W(t.callback_finish,e)}function p(t,e,n){t.addEventListener(e,n),t.llEvLisnrs[e]=n}function h(t,e,n){delete t.llTempImage,tt(n,-1),n&&--n.toLoadCount,Y(t,e.class_loading),e.unobserve_completed&&Z(t,n)}function E(n,a,o){var i=s(n)||n;dt(i)||function(t){dt(t)||(t.llEvLisnrs={});var e="VIDEO"===t.tagName?"loadeddata":"load";p(t,e,function(t){!function(t,e,n,a){var o=l(e);h(e,n,a),X(e,n.class_loaded),$(e,F),W(n.callback_loaded,e,a),o||m(n,a)}(0,n,a,o),ft(i)}),p(t,"error",function(t){!function(t,e,n,a){var o=l(e);h(e,n,a),X(e,n.class_error),$(e,J),W(n.callback_error,e,a),n.restore_on_error&&f(e,ot),o||m(n,a)}(0,n,a,o),ft(i)})}(i)}function I(t){return t.use_native&&"loading"in HTMLImageElement.prototype}function y(t,s,u){t.forEach(function(t){return t.isIntersecting||0<t.intersectionRatio?(o=t.target,i=t,r=s,l=u,c=0<=Q.indexOf(U(o)),$(o,"entered"),X(o,r.class_entered),Y(o,r.class_exited),r.unobserve_entered&&Z(o,l),W(r.callback_enter,o,i,l),void(c||_t(o,r,l))):(e=t.target,n=t,a=s,i=u,void(K(e)||(X(e,a.class_exited),c=e,o=n,r=i,(l=a).cancel_on_exit&&U(c)===V&&"IMG"===c.tagName&&(ft(c),et(t=c,function(t){gt(t)}),gt(t),bt(c),Y(c,l.class_loading),tt(r,-1),q(c),W(l.callback_cancel,c,o,r)),W(a.callback_exit,e,n,i))));var e,n,a,o,i,r,l,c})}function k(t){return Array.prototype.slice.call(t)}function w(t){return t.container.querySelectorAll(t.elements_selector)}function A(t){return U(t)===J}function L(t,e){return e=t||w(e),k(e).filter(K)}function t(t,e){var a,o,n,i,t=r(t);this._settings=t,this.loadingCount=0,n=t,i=this,C&&!I(n)&&(i._observer=new IntersectionObserver(function(t){y(t,n,i)},{root:n.container===document?null:n.container,rootMargin:n.thresholds||n.threshold+"px"})),a=t,o=this,O&&(o._onlineHandler=function(){var e,t,n;t=o,n=w(e=a),k(n).filter(A).forEach(function(t){Y(t,e.class_error),q(t)}),t.update()},window.addEventListener("online",o._onlineHandler)),this.update(e)}var O="undefined"!=typeof window,x=O&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),C=O&&"IntersectionObserver"in window,N=O&&"classList"in document.createElement("p"),M=O&&1<window.devicePixelRatio,z={elements_selector:".lazy",container:x||O?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},T="src",R="srcset",G="sizes",j="poster",D="llOriginalAttrs",H="data",V="loading",F="loaded",B="applied",J="error",P="native",S="data-",U=function(t){return c(t,"ll-status")},$=function(t,e){var n;n=t,t="data-ll-status",null!==e?n.setAttribute(t,e):n.removeAttribute(t)},q=function(t){return $(t,null)},K=function(t){return null===U(t)},Q=[V,F,B,J],W=function(t,e,n,a){t&&(void 0===a?void 0===n?t(e):t(e,n):t(e,n,a))},X=function(t,e){N?t.classList.add(e):t.className+=(t.className?" ":"")+e},Y=function(t,e){N?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},Z=function(t,e){!e||(e=e._observer)&&e.unobserve(t)},tt=function(t,e){t&&(t.loadingCount+=e)},et=function(t,e){t=t.parentNode;t&&"PICTURE"===t.tagName&&n(t).forEach(e)},nt=[T],at=[T,j],ot=[T,R,G],it=[H],rt=function(t){return!!t[D]},lt=function(t){return t[D]},ct={IMG:function(t,e){et(t,function(t){d(t,ot),v(t,e)}),d(t,ot),v(t,e)},IFRAME:function(t,e){d(t,nt),b(t,T,c(t,e.data_src))},VIDEO:function(t,e){a(t,function(t){d(t,nt),b(t,T,c(t,e.data_src))}),d(t,at),b(t,j,c(t,e.data_poster)),b(t,T,c(t,e.data_src)),t.load()},OBJECT:function(t,e){d(t,it),b(t,H,c(t,e.data_src))}},st=["IMG","IFRAME","VIDEO","OBJECT"],ut=function(t,e,n){t.removeEventListener(e,n)},dt=function(t){return!!t.llEvLisnrs},ft=function(t){if(dt(t)){var e,n=t.llEvLisnrs;for(e in n){var a=n[e];ut(t,e,a)}delete t.llEvLisnrs}},_t=function(t,e,n){var a,o,i,r,l;-1<st.indexOf(t.tagName)?(E(i=t,r=e,a=n),l=r,r=a,(i=ct[(a=i).tagName])&&(i(a,l),g(a,l,r))):(o=e,i=n,(a=t).llTempImage=document.createElement("IMG"),E(a,o,i),rt(l=a)||(l[D]={backgroundImage:l.style.backgroundImage}),r=i,t=c(e=a,(n=o).data_bg),l=c(e,n.data_bg_hidpi),(t=M&&l?l:t)&&(e.style.backgroundImage='url("'.concat(t,'")'),s(e).setAttribute(T,t),g(e,n,r)),l=i,n=c(t=a,(e=o).data_bg_multi),r=c(t,e.data_bg_multi_hidpi),(n=M&&r?r:n)&&(t.style.backgroundImage=n,_(t,e,l)),e=i,(a=c(l=a,(i=o).data_bg_set))&&(a=(o=a.split("|")).map(function(t){return"image-set(".concat(t,")")}),l.style.backgroundImage=a.join(),""===l.style.backgroundImage&&(a=o.map(function(t){return"-webkit-image-set(".concat(t,")")}),l.style.backgroundImage=a.join()),_(l,i,e)))},gt=function(t){t.removeAttribute(T),t.removeAttribute(R),t.removeAttribute(G)},bt=function(t){et(t,function(t){f(t,ot)}),f(t,ot)},vt={IMG:bt,IFRAME:function(t){f(t,nt)},VIDEO:function(t){a(t,function(t){f(t,nt)}),f(t,at),t.load()},OBJECT:function(t){f(t,it)}},mt=["IMG","IFRAME","VIDEO"];return t.prototype={update:function(t){var e,a,o,n=this._settings,i=L(t,n);u(this,i.length),!x&&C?I(n)?(a=n,o=this,i.forEach(function(t){var e,n;-1!==mt.indexOf(t.tagName)&&(e=a,n=o,(t=t).setAttribute("loading","lazy"),E(t,e,n),(n=ct[t.tagName])&&n(t,e),$(t,P))}),u(o,0)):(t=i,(n=this._observer).disconnect(),e=n,t.forEach(function(t){e.observe(t)})):this.loadAll(i)},destroy:function(){this._observer&&this._observer.disconnect(),O&&window.removeEventListener("online",this._onlineHandler),w(this._settings).forEach(function(t){i(t)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(t){var e=this,n=this._settings;L(t,n).forEach(function(t){Z(t,e),_t(t,n,e)})},restoreAll:function(){var o=this._settings;w(o).forEach(function(t){var e,n,a;n=o,(t=vt[(a=e=t).tagName])?t(a):rt(t=a)&&(a=lt(t),t.style.backgroundImage=a.backgroundImage),a=n,K(n=e)||l(n)||(Y(n,a.class_entered),Y(n,a.class_exited),Y(n,a.class_applied),Y(n,a.class_loading),Y(n,a.class_loaded),Y(n,a.class_error)),q(e),i(e)})}},t.load=function(t,e){e=r(e);_t(t,e)},t.resetStatus=function(t){q(t)},O&&function(t,e){if(e)if(e.length)for(var n,a=0;n=e[a];a+=1)o(t,n);else o(t,e)}(t,window.lazyLoadOptions),t});