!function(f){f.fn.scwStickySidebar=function(i){function t(i,t){return!0===i.initialized||!(f("body").width()<i.minWidth)&&(t=t,(h=i).initialized=!0,0===f("#scw-sticky-sidebar-stylesheet-"+h.namespace).length&&f("head").append(f('<style id="scw-sticky-sidebar-stylesheet-'+h.namespace+'">.scwStickySidebar:after {content: ""; display: table; clear: both;}</style>')),t.each(function(){function p(){i.fixedScrollTop=0,i.sidebar.css({"min-height":"1px"}),i.stickySidebar.css({position:"static",width:"",transform:"none"})}var e,i={};i.sidebar=f(this),i.options=h||{},i.container=f(i.options.containerSelector),0==i.container.length&&(i.container=i.sidebar.parent()),i.sidebar.parents().css("-webkit-transform","none"),i.sidebar.css({position:i.options.defaultPosition,overflow:"visible","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),i.stickySidebar=i.sidebar.find(".scwStickySidebar"),0==i.stickySidebar.length&&(e=/(?:text|application)\/(?:x-)?(?:javascript|ecmascript)/i,i.sidebar.find("script").filter(function(i,t){return 0===t.type.length||t.type.match(e)}).remove(),i.stickySidebar=f("<div>").addClass("scwStickySidebar").append(i.sidebar.children()),i.sidebar.append(i.stickySidebar)),i.marginBottom=parseInt(i.sidebar.css("margin-bottom")),i.paddingTop=parseInt(i.sidebar.css("padding-top")),i.paddingBottom=parseInt(i.sidebar.css("padding-bottom"));var t,o,s,n=i.stickySidebar.offset().top,d=i.stickySidebar.outerHeight();i.stickySidebar.css("padding-top",1),i.stickySidebar.css("padding-bottom",1),n-=i.stickySidebar.offset().top,d=i.stickySidebar.outerHeight()-d-n,0==n?(i.stickySidebar.css("padding-top",0),i.stickySidebarPaddingTop=0):i.stickySidebarPaddingTop=1,0==d?(i.stickySidebar.css("padding-bottom",0),i.stickySidebarPaddingBottom=0):i.stickySidebarPaddingBottom=1,i.previousScrollTop=null,i.fixedScrollTop=0,p(),i.onScroll=function(i){if(i.stickySidebar.is(":visible"))if(f("body").width()<i.options.minWidth)p();else{if(i.options.disableOnResponsiveLayouts)if(i.sidebar.outerWidth("none"==i.sidebar.css("float"))+50>i.container.width())return void p();var t,e,o,s,n,d,a=f(document).scrollTop(),r="static";a>=i.sidebar.offset().top+(i.paddingTop-i.options.additionalMarginTop)&&(e=i.paddingTop+h.additionalMarginTop,n=i.paddingBottom+i.marginBottom+h.additionalMarginBottom,s=i.sidebar.offset().top,o=i.sidebar.offset().top+(c=i.container,l=c.height(),c.children().each(function(){l=Math.max(l,f(this).height())}),l),t=0+h.additionalMarginTop,c=i.stickySidebar.outerHeight()+e+n<f(window).height()?t+i.stickySidebar.outerHeight():f(window).height()-i.marginBottom-i.paddingBottom-h.additionalMarginBottom,e=s-a+i.paddingTop,n=o-a-i.paddingBottom-i.marginBottom,s=i.stickySidebar.offset().top-a,o=i.previousScrollTop-a,"fixed"==i.stickySidebar.css("position")&&"modern"==i.options.sidebarBehavior&&(s+=o),"stick-to-top"==i.options.sidebarBehavior&&(s=h.additionalMarginTop),"stick-to-bottom"==i.options.sidebarBehavior&&(s=c-i.stickySidebar.outerHeight()),s=0<o?Math.min(s,t):Math.max(s,c-i.stickySidebar.outerHeight()),s=Math.max(s,e),s=Math.min(s,n-i.stickySidebar.outerHeight()),r=!(n=i.container.height()==i.stickySidebar.outerHeight())&&s==t||!n&&s==c-i.stickySidebar.outerHeight()?"fixed":a+s-i.sidebar.offset().top-i.paddingTop<=h.additionalMarginTop?"static":"absolute"),"fixed"==r?(d=f(document).scrollLeft(),i.stickySidebar.css({position:"fixed",width:b(i.stickySidebar)+"px",transform:"translateY("+s+"px)",left:i.sidebar.offset().left+parseInt(i.sidebar.css("padding-left"))-d+"px",top:"0px"})):"absolute"==r?(d={},"absolute"!=i.stickySidebar.css("position")&&(d.position="absolute",d.transform="translateY("+(a+s-i.sidebar.offset().top-i.stickySidebarPaddingTop-i.stickySidebarPaddingBottom)+"px)",d.top="0px"),d.width=b(i.stickySidebar)+"px",d.left="",i.stickySidebar.css(d)):"static"==r&&p(),"static"!=r&&1==i.options.updateSidebarHeight&&i.sidebar.css({"min-height":i.stickySidebar.outerHeight()+i.stickySidebar.offset().top-i.sidebar.offset().top+i.paddingBottom}),i.previousScrollTop=a}var c,l},i.onScroll(i),f(document).on("scroll."+i.options.namespace,(s=i,function(){s.onScroll(s)})),f(window).on("resize."+i.options.namespace,(o=i,function(){o.stickySidebar.css({position:"static"}),o.onScroll(o)})),"undefined"!=typeof ResizeSensor&&new ResizeSensor(i.stickySidebar[0],(t=i,function(){t.onScroll(t)}))}),!0);var h}function b(i){var t;try{t=i[0].getBoundingClientRect().width}catch(i){}return t=void 0===t?i.width():t}var e,o,s,n,d,a;return(i=f.extend({containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,updateSidebarHeight:!0,minWidth:0,disableOnResponsiveLayouts:!0,sidebarBehavior:"modern",defaultPosition:"relative",namespace:"TSS"},i)).additionalMarginTop=parseInt(i.additionalMarginTop)||0,i.additionalMarginBottom=parseInt(i.additionalMarginBottom)||0,t(e=i,o=this)||(console.log("TSS: Body width smaller than options.minWidth. Init is delayed."),f(document).on("scroll."+e.namespace,(d=e,a=o,function(i){t(d,a)&&f(this).unbind(i)})),f(window).on("resize."+e.namespace,(s=e,n=o,function(i){t(s,n)&&f(this).unbind(i)}))),this}}(jQuery),function(){function a(e,i){function c(){var i,t;this.q=[],this.add=function(i){this.q.push(i)},this.call=function(){for(i=0,t=this.q.length;i<t;i++)this.q[i].call()}}function t(i,t){if(i.resizedAttached){if(i.resizedAttached)return i.resizedAttached.add(t),0}else i.resizedAttached=new c,i.resizedAttached.add(t);i.resizeSensor=document.createElement("div"),i.resizeSensor.className="resize-sensor";var e="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",t="position: absolute; left: 0; top: 0; transition: 0s;";i.resizeSensor.style.cssText=e,i.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+e+'"><div style="'+t+'"></div></div><div class="resize-sensor-shrink" style="'+e+'"><div style="'+t+' width: 200%; height: 200%"></div></div>',i.appendChild(i.resizeSensor),{fixed:1,absolute:1}[e="position",(t=i).currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]]||(i.style.position="relative");var o,s,n=i.resizeSensor.childNodes[0],d=n.childNodes[0],a=i.resizeSensor.childNodes[1],r=(a.childNodes[0],function(){d.style.width=n.offsetWidth+10+"px",d.style.height=n.offsetHeight+10+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,a.scrollLeft=a.scrollWidth,a.scrollTop=a.scrollHeight,o=i.offsetWidth,s=i.offsetHeight});r();t=function(i,t,e){i.attachEvent?i.attachEvent("on"+t,e):i.addEventListener(t,e)},e=function(){i.offsetWidth==o&&i.offsetHeight==s||i.resizedAttached&&i.resizedAttached.call(),r()};t(n,"scroll",e),t(a,"scroll",e)}var o=Object.prototype.toString.call(e),s="[object Array]"===o||"[object NodeList]"===o||"[object HTMLCollection]"===o||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements;if(s)for(var n=0,d=e.length;n<d;n++)t(e[n],i);else t(e,i);this.detach=function(){if(s)for(var i=0,t=e.length;i<t;i++)a.detach(e[i]);else a.detach(e)}}a.detach=function(i){i.resizeSensor&&(i.removeChild(i.resizeSensor),delete i.resizeSensor,delete i.resizedAttached)},"undefined"!=typeof module&&void 0!==module.exports?module.exports=a:window.ResizeSensor=a}();